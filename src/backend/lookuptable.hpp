#pragma once

#include <cstdint>
#include <unordered_map>
#include <iostream>
#include <vector>
#include <fstream>

const static uint64_t AFile=72340172838076673LL, HFile=-9187201950435737472LL, 
                      ABFiles=217020518514230019LL, GHFiles=-4557430888798830400LL,
                      Rank1=-72057594037927936LL, Rank4=1095216660480LL, Rank5=4278190080LL, Rank8=255LL, 
                      KingSpan=460039LL, KnightSpan=43234889994LL;

const static uint64_t knightMasks[64] = {0x20400LL, 0x50800LL, 0xa1100LL, 0x142200LL, 0x284400LL, 0x508800LL, 0xa01000LL, 0x402000LL, 0x2040004LL, 
                                 0x5080008LL, 0xa110011LL, 0x14220022LL, 0x28440044LL, 0x50880088LL, 0xa0100010LL, 0x40200020LL, 0x204000402LL, 
                                 0x508000805LL, 0xa1100110aLL, 0x1422002214LL, 0x2844004428LL, 0x5088008850LL, 0xa0100010a0LL, 0x4020002040LL, 
                                 0x20400040200LL, 0x50800080500LL, 0xa1100110a00LL, 0x142200221400LL, 0x284400442800LL, 0x508800885000LL, 0xa0100010a000LL, 
                                 0x402000204000LL, 0x2040004020000LL, 0x5080008050000LL, 0xa1100110a0000LL, 0x14220022140000LL, 0x28440044280000LL, 0x50880088500000LL, 
                                 0xa0100010a00000LL, 0x40200020400000LL, 0x204000402000000LL, 0x508000805000000LL, 0xa1100110a000000LL, 0x1422002214000000LL, 0x2844004428000000LL, 
                                 0x5088008850000000LL, 0xa0100010a0000000LL, 0x4020002040000000LL, 0x400040200000000LL, 0x800080500000000LL, 0x1100110a00000000LL, 0x2200221400000000LL, 
                                 0x4400442800000000LL, 0x8800885000000000LL, 0x100010a000000000LL, 0x2000204000000000LL, 0x4020000000000LL, 0x8050000000000LL, 0x110a0000000000LL, 
                                 0x22140000000000LL, 0x44280000000000LL, 0x88500000000000LL, 0x10a00000000000LL, 0x20400000000000LL},
                          kingMasks[64] = {0x302LL, 0x705LL, 0xe0aLL, 0x1c14LL, 0x3828LL, 0x7050LL, 0xe0a0LL, 0xc040LL, 0x30203LL, 0x70507LL, 0xe0a0eLL, 0x1c141cLL, 0x382838LL, 0x705070LL, 
                                      0xe0a0e0LL, 0xc040c0LL, 0x3020300LL, 0x7050700LL, 0xe0a0e00LL, 0x1c141c00LL, 0x38283800LL, 0x70507000LL, 0xe0a0e000LL, 0xc040c000LL, 0x302030000LL, 
                                      0x705070000LL, 0xe0a0e0000LL, 0x1c141c0000LL, 0x3828380000LL, 0x7050700000LL, 0xe0a0e00000LL, 0xc040c00000LL, 0x30203000000LL, 0x70507000000LL, 
                                      0xe0a0e000000LL, 0x1c141c000000LL, 0x382838000000LL, 0x705070000000LL, 0xe0a0e0000000LL, 0xc040c0000000LL, 0x3020300000000LL, 0x7050700000000LL, 
                                      0xe0a0e00000000LL, 0x1c141c00000000LL, 0x38283800000000LL, 0x70507000000000LL, 0xe0a0e000000000LL, 0xc040c000000000LL, 0x302030000000000LL, 
                                      0x705070000000000LL, 0xe0a0e0000000000LL, 0x1c141c0000000000LL, 0x3828380000000000LL, 0x7050700000000000LL, 0xe0a0e00000000000LL, 0xc040c00000000000LL, 
                                      0x203000000000000LL, 0x507000000000000LL, 0xa0e000000000000LL, 0x141c000000000000LL, 0x2838000000000000LL, 0x5070000000000000LL, 0xa0e0000000000000LL, 
                                      0x40c0000000000000LL};

const static int mg_pawn_table_w[64] = {
      0,   0,   0,   0,   0,   0,  0,   0,
     98, 134,  61,  95,  68, 126, 34, -11,
     -6,   7,  26,  31,  65,  56, 25, -20,
    -14,  13,   6,  21,  23,  12, 17, -23,
    -27,  -2,  -5,  12,  17,   6, 10, -25,
    -26,  -4,  -4, -10,   3,   3, 33, -12,
    -35,  -1, -20, -23, -15,  24, 38, -22,
      0,   0,   0,   0,   0,   0,  0,   0
};

const static int eg_pawn_table_w[64] = {
      0,   0,   0,   0,   0,   0,   0,   0,
    178, 173, 158, 134, 147, 132, 165, 187,
     94, 100,  85,  67,  56,  53,  82,  84,
     32,  24,  13,   5,  -2,   4,  17,  17,
     13,   9,  -3,  -7,  -7,  -8,   3,  -1,
      4,   7,  -6,   1,   0,  -5,  -1,  -8,
     13,   8,   8,  10,  13,   0,   2,  -7,
      0,   0,   0,   0,   0,   0,   0,   0
};

const static int mg_knight_table_w[64] = {
    -167, -89, -34, -49,  61, -97, -15, -107,
     -73, -41,  72,  36,  23,  62,   7,  -17,
     -47,  60,  37,  65,  84, 129,  73,   44,
      -9,  17,  19,  53,  37,  69,  18,   22,
     -13,   4,  16,  13,  28,  19,  21,   -8,
     -23,  -9,  12,  10,  19,  17,  25,  -16,
     -29, -53, -12,  -3,  -1,  18, -14,  -19,
    -105, -21, -58, -33, -17, -28, -19,  -23
};

const static int eg_knight_table_w[64] = {
    -58, -38, -13, -28, -31, -27, -63, -99,
    -25,  -8, -25,  -2,  -9, -25, -24, -52,
    -24, -20,  10,   9,  -1,  -9, -19, -41,
    -17,   3,  22,  22,  22,  11,   8, -18,
    -18,  -6,  16,  25,  16,  17,   4, -18,
    -23,  -3,  -1,  15,  10,  -3, -20, -22,
    -42, -20, -10,  -5,  -2, -20, -23, -44,
    -29, -51, -23, -15, -22, -18, -50, -64
};

const static int mg_bishop_table_w[64] = {
    -29,   4, -82, -37, -25, -42,   7,  -8,
    -26,  16, -18, -13,  30,  59,  18, -47,
    -16,  37,  43,  40,  35,  50,  37,  -2,
     -4,   5,  19,  50,  37,  37,   7,  -2,
     -6,  13,  13,  26,  34,  12,  10,   4,
      0,  15,  15,  15,  14,  27,  18,  10,
      4,  15,  16,   0,   7,  21,  33,   1,
    -33,  -3, -14, -21, -13, -12, -39, -21
};

const static int eg_bishop_table_w[64] = {
    -14, -21, -11,  -8, -7,  -9, -17, -24,
     -8,  -4,   7, -12, -3, -13,  -4, -14,
      2,  -8,   0,  -1, -2,   6,   0,   4,
     -3,   9,  12,   9, 14,  10,   3,   2,
     -6,   3,  13,  19,  7,  10,  -3,  -9,
    -12,  -3,   8,  10, 13,   3,  -7, -15,
    -14, -18,  -7,  -1,  4,  -9, -15, -27,
    -23,  -9, -23,  -5, -9, -16,  -5, -17
};

const static int mg_rook_table_w[64] = {
     32,  42,  32,  51, 63,  9,  31,  43,
     27,  32,  58,  62, 80, 67,  26,  44,
     -5,  19,  26,  36, 17, 45,  61,  16,
    -24, -11,   7,  26, 24, 35,  -8, -20,
    -36, -26, -12,  -1,  9, -7,   6, -23,
    -45, -25, -16, -17,  3,  0,  -5, -33,
    -44, -16, -20,  -9, -1, 11,  -6, -71,
     -9, -23,  -8,  17, 16,  7, -37,  -6
};

const static int eg_rook_table_w[64] = {
    13, 10, 18, 15, 12,  12,   8,   5,
    11, 13, 13, 11, -3,   3,   8,   3,
     7,  7,  7,  5,  4,  -3,  -5,  -3,
     4,  3, 13,  1,  2,   1,  -1,   2,
     3,  5,  8,  4, -5,  -6,  -8, -11,
    -4,  0, -5, -1, -7, -12,  -8, -16,
    -6, -6,  0,  2, -9,  -9, -11,  -3,
    -9,  2,  3, -1, -5, -13,   4, -20
};

const static int mg_queen_table_w[64] = {
    -28,   0,  29,  12,  59,  44,  43,  45,
    -24, -39,  -5,   1, -16,  57,  28,  54,
    -13, -17,   7,   8,  29,  56,  47,  57,
    -27, -27, -16, -16,  -1,  17,  -2,   1,
     -9, -26,  -9, -10,  -2,  -4,   3,  -3,
    -14,   2, -11,  -2,  -5,   2,  14,   5,
    -35,  -8,  11,   2,   8,  15,  -3,   1,
     -1, -18,  -9,  10, -15, -25, -31, -50
};

const static int mg_queen_table_b[64] = {
        45,  43,  44,  59,  12,  29,   0, -28,
        54,  28,  57, -16,   1,  -5, -39, -24,
        57,  47,  56,  29,   8,   7, -17, -13,
         1,  -2,  17,  -1, -16, -16, -27, -27,
        -3,   3,  -4,  -2, -10,  -9, -26,  -9,
         5,  14,   2,  -5,  -2, -11,   2, -14,
         1,  -3,  15,   8,   2,  11,  -8, -35,
       -50, -31, -25, -15,  10,  -9, -18,  -1
};


const static int eg_queen_table_w[64] = {
     -9,  22,  22,  27,  27,  19,  10,  20,
    -17,  20,  32,  41,  58,  25,  30,   0,
    -20,   6,   9,  49,  47,  35,  19,   9,
      3,  22,  24,  45,  57,  40,  57,  36,
    -18,  28,  19,  47,  31,  34,  39,  23,
    -16, -27,  15,   6,   9,  17,  10,   5,
    -22, -23, -30, -16, -16, -23, -36, -32,
    -33, -28, -22, -43,  -5, -32, -20, -41
};

const static int mg_king_table_w[64] = {
    -65,  23,  16, -15, -56, -34,   2,  13,
     29,  -1, -20,  -7,  -8,  -4, -38, -29,
     -9,  24,   2, -16, -20,   6,  22, -22,
    -17, -20, -12, -27, -30, -25, -14, -36,
    -49,  -1, -27, -39, -46, -44, -33, -51,
    -14, -14, -22, -46, -44, -30, -15, -27,
      1,   7,  -8, -64, -43, -16,   9,   8,
    -15,  36,  12, -54,   8, -28,  24,  14
};

const static int mg_king_table_b[64] = {
        13,   2, -34, -56, -15,  16,  23, -65,
       -29, -38,  -4,  -8,  -7, -20,  -1,  29,
       -22,  22,   6, -20, -16,   2,  24,  -9,
       -36, -14, -25, -30, -27, -12, -20, -17,
       -51, -33, -44, -46, -39, -27,  -1, -49,
       -27, -15, -30, -44, -46, -22, -14, -14,
         8,   9, -16, -43, -64,  -8,   7,   1,
        14,  24, -28,   8, -54,  12,  36, -15
};

const static int eg_king_table_w[64] = {
   -100, -90, -70, -60, -60, -70, -90, -100,
    -90, -40, -20, -20, -20, -20, -40, -90,
    -70, -20,  12,  15,  15,  12, -20, -70,
    -60, -20,  15,  20,  20,  15, -20, -60,
    -60, -20,  15,  20,  20,  15, -20, -60,
    -70, -20,  12,  15,  15,  12, -20, -70,
    -90, -40, -20, -20, -20, -20, -40, -90,
   -100, -90, -70, -60, -60, -70, -90, -100
};